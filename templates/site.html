<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{{ site_title }}</title>
  <style>
    :root { --bg:#0b0d10; --card:#12161b; --ink:#e9eef5; --muted:#a8b3c2; --pill:#1f2630; --accent:#7cc3ff; }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.45 -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial}
    a{color:var(--accent);text-decoration:none} a:hover{text-decoration:underline}
    .wrap{max-width:1100px;margin:24px auto;padding:0 16px}
    header h1{margin:0 0 4px}
    header .meta{color:var(--muted);margin-bottom:20px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:20px;align-items:start}
    .card{background:var(--card);border-radius:16px;padding:12px;box-shadow:0 1px 0 rgba(255,255,255,.05) inset}
    .poster{width:100%;height:auto;border-radius:10px;background:#0e1318}
    .poster img { width: 100%; height: auto; }
    .title{font-weight:700;margin:10px 0 6px}
    .meta2{color:var(--muted);font-size:14px;margin-bottom:8px}
    .pills{display:flex;flex-wrap:wrap;gap:8px}
    .pill{background:var(--pill);padding:4px 8px;border-radius:999px;font-size:12px;white-space:nowrap}
    footer{color:var(--muted);font-size:12px;margin:28px 0 16px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>{{ site_title }}</h1>
      <div class="meta">Window: {{ window_label }} • Region: {{ region }} • Stores: {{ store_names|join(', ') if store_names else 'Any' }}</div>
    </header>
    <main class="grid">
      {% for item in items %}
      <article class="card">
        {% if item.poster %}
        <div class="poster">
          <img src="{{ item.poster }}" alt="{{ item.title }}">
        </div>
        {% else %}
        <div class="poster">
          <img src="https://placehold.co/200x300" alt="No Poster">
        </div>
        {% endif %}
        <div class="title">{{ item.title }} ({{ item.year if item.year else '—' }})</div>
        <div class="meta2">
          RT: {{ item.rt_score }}% if item.rt_score is not none else '—' • TMDB: {{ item.tmdb_vote if item.tmdb_vote else '—' }}
        </div>
        <div class="pills">
          {% for provider in item.providers %}
          <span class="pill">{{ provider }}</span>
          {% endfor %}
        </div>
        <div class="meta2">
          <a href="{{ item.tmdb_watch_link if item.tmdb_watch_link else '#' }}">Watch options</a> •
          <a href="{{ item.justwatch_search_link if item.justwatch_search_link else '#' }}">JustWatch</a> •
          <a href="{{ item.tmdb_url if item.tmdb_url else '#' }}">TMDB</a>
        </div>
      </article>
      {% endfor %}
    </main>
    <footer>
      Data & images by TMDB — this product uses the TMDB API but is not endorsed or certified by TMDB.
      <div>Generated: {{ generated_at }}</div>
    </footer>
  </div>
</body>
</html>